# Test Renderer for React

## Project Overview

**Test Renderer for React** is a lightweight, pure JavaScript testing library for React 19. It replaces the deprecated `react-test-renderer`. Built with `react-reconciler`, it outputs to a lightweight, traversable object structure (`HostElement`) for snapshot testing and asserting component output without a browser environment (DOM) or native dependencies.

### Key Features

- **React 19 Ready:** Supports modern React features, including concurrent rendering.
- **Lightweight & Universal:** No DOM or native dependencies. Runs in any JavaScript environment (Node.js, Bun, etc.).
- **Type-Safe:** Written in strict TypeScript.
- **Snapshot Friendly:** Produces JSON output for Jest/Vitest snapshots.

### Architecture

- **`src/index.ts`**: The public entry point that exports `createRoot` from `renderer.ts`.
- **`src/renderer.ts`**: Contains the main implementation. Exports `createRoot` which initializes the custom React reconciler.
- **`src/reconciler.ts`**: Implements the `react-reconciler` host config, translating React updates into operations on the internal tree.
- **`src/host-element.ts`**: Defines `HostElement`, a wrapper around the internal fiber nodes with a DOM-like API (e.g., `children`, `props`, `parent`).
- **`src/render-to-json.ts`**: Handles the serialization of `HostElement` trees into JSON format for snapshots.

## Building and Running

The project uses **Bun** for development scripts, but you can install it via npm.

### Prerequisites

- Node.js (for consumption)
- Bun (for development scripts)

### Key Commands

| Command                | Description                                                    |
| :--------------------- | :------------------------------------------------------------- |
| `bun run build`        | Builds the project using `tsup` into `dist/` (CJS and ESM).    |
| `bun run dev`          | Runs the build in watch mode.                                  |
| `bun run test`         | Runs the test suite using `jest`.                              |
| `bun run lint`         | Runs `eslint` to check code style.                             |
| `bun run typecheck`    | Runs `tsc` to verify types.                                    |
| `bun run validate`     | Runs typechecking, tests, linting, and formatting in sequence. |
| `bun run validate:fix` | Runs validate with auto-fix for formatting and linting issues. |

## Development Conventions

- **Language:** Strict TypeScript.
- **Styling:** Code formatting is enforced by Prettier (configured via npm scripts, no explicit config file, uses defaults).
- **Testing:** Unit tests are located in `src/__tests__/`. Tests use `jest` and `ts-jest`.
- **Linting:** ESLint is used for static analysis.
- **Git:** Commits seem to follow standard conventions (implied by `release-it`).

## Directory Structure

- `src/`: Source code.
  - `__tests__/`: Unit tests.
  - `test-utils/`: Utilities used within project tests.
- `dist/`: Compiled output (generated by build).
- `.github/`: GitHub Actions workflows for CI.

## Rules

- Avoid adding unnecessary comments
